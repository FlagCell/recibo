<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Recibo Simples</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 700px;
      margin: 20px auto;
      padding: 20px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 10px;
    }
    input, textarea, select {
      width: 100%;
      padding: 8px;
      font-size: 14px;
      box-sizing: border-box;
      margin-top: 5px;
    }
    .assinatura {
      margin-top: 40px;
      text-align: center;
    }
    button {
      margin-top: 30px;
      padding: 12px;
      font-size: 16px;
      width: 100%;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h2 style="text-align:center">RECIBO</h2>

  <label>Nome de quem pagou:</label>
  <input type="text" id="nome">

  <label>CPF/CNPJ de quem pagou:</label>
  <input type="text" id="cpf">

  <label>Valor (R$):</label>
  <input type="text" id="valor" oninput="atualizarExtenso()">

  <label>Valor por extenso:</label>
  <input type="text" id="extenso" readonly>

  <label>Referente a:</label>
  <textarea id="referente" rows="3"></textarea>

  <label>Forma de pagamento:</label>
  <select id="forma">
    <option value="">Selecione</option>
    <option>Dinheiro</option>
    <option>Pix</option>
    <option>Transferência</option>
    <option>Cartão de crédito</option>
    <option>Cartão de débito</option>
    <option>Cheque</option>
    <option>Outro</option>
  </select>

  <label>Cidade:</label>
  <input type="text" id="cidade">

  <label>Data:</label>
  <input type="date" id="data">

  <div class="assinatura">
    <p>__________________________________________</p>
    <p>Assinatura de quem recebeu</p>
  </div>

  <button onclick="gerarPDF()">Gerar PDF com 2 vias</button>

  <script>
    function atualizarExtenso() {
      const input = document.getElementById('valor').value.replace(',', '.').replace(/[^0-9.]/g, '');
      const valor = parseFloat(input);
      const campo = document.getElementById('extenso');
      if (isNaN(valor)) {
        campo.value = '';
        return;
      }
      campo.value = numeroParaExtenso(valor);
    }

    function numeroParaExtenso(valor) {
      const unidades = ['zero', 'um', 'dois', 'três', 'quatro', 'cinco', 'seis', 'sete', 'oito', 'nove'];
      const dezenas10 = ['dez', 'onze', 'doze', 'treze', 'quatorze', 'quinze', 'dezesseis', 'dezessete', 'dezoito', 'dezenove'];
      const dezenas = ['', '', 'vinte', 'trinta', 'quarenta', 'cinquenta', 'sessenta', 'setenta', 'oitenta', 'noventa'];
      const centenas = ['', 'cem', 'cento', 'duzentos', 'trezentos', 'quatrocentos', 'quinhentos', 'seiscentos', 'setecentos', 'oitocentos', 'novecentos'];

      function extenso(n) {
        if (n === 0) return 'zero';
        let s = '';

        if (n >= 1000) {
          const mil = Math.floor(n / 1000);
          s += mil === 1 ? 'mil' : extenso(mil) + ' mil';
          n %= 1000;
          if (n > 0) s += ' e ';
        }

        if (n >= 100) {
          const c = Math.floor(n / 100);
          if (c === 1 && n % 100 === 0) {
            s += 'cem';
            n = 0;
          } else {
            s += centenas[c + 1];
            n %= 100;
            if (n > 0) s += ' e ';
          }
        }

        if (n >= 20) {
          s += dezenas[Math.floor(n / 10)];
          n %= 10;
          if (n > 0) s += ' e ';
        } else if (n >= 10) {
          s += dezenas10[n - 10];
          n = 0;
        }

        if (n > 0 && n < 10) {
          s += unidades[n];
        }

        return s;
      }

      const inteiro = Math.floor(valor);
      const centavos = Math.round((valor - inteiro) * 100);

      let texto = extenso(inteiro) + ' real' + (inteiro !== 1 ? 's' : '');
      if (centavos > 0) {
        texto += ' e ' + extenso(centavos) + ' centavo' + (centavos !== 1 ? 's' : '');
      }

      return texto.charAt(0).toUpperCase() + texto.slice(1);
    }

    function gerarPDF() {
      const nome = document.getElementById('nome').value;
      const cpf = document.getElementById('cpf').value;
      const valor = document.getElementById('valor').value;
      const extenso = document.getElementById('extenso').value;
      const referente = document.getElementById('referente').value;
      const forma = document.getElementById('forma').value;
      const cidade = document.getElementById('cidade').value;
      const data = document.getElementById('data').value;

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      function recibo(offsetY) {
        let y = 10 + offsetY;
        doc.setFontSize(14);
        doc.text("RECIBO", 105, y, { align: "center" });

        doc.setFontSize(11);
        y += 10;
        doc.text(`Recebi de: ${nome}`, 10, y); y += 7;
        doc.text(`CPF/CNPJ: ${cpf}`, 10, y); y += 7;
        doc.text(`Valor: R$ ${valor}`, 10, y); y += 7;
        doc.text(`Valor por extenso: ${extenso}`, 10, y); y += 7;
        doc.text(`Referente a: ${referente}`, 10, y); y += 7;
        doc.text(`Forma de pagamento: ${forma}`, 10, y); y += 7;
        doc.text(`Cidade: ${cidade}`, 10, y); y += 7;
        doc.text(`Data: ${data}`, 10, y); y += 20;
        doc.text("__________________________________________", 105, y, { align: "center" });
        y += 6;
        doc.text("Assinatura de quem recebeu", 105, y, { align: "center" });
      }

      recibo(0);      // Primeira via
      recibo(130);    // Segunda via

      doc.save("recibo.pdf");
    }
  </script>
</body>
</html>
